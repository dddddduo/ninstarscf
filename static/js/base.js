if(!document.getElementsByClassName){document.getElementsByClassName=function(className,element){var children=(element||document).getElementsByTagName('*');var elements=new Array();for(var i=0;i<children.length;i++){var child=children[i];var classNames=child.className.split(' ');for(var j=0;j<classNames.length;j++){if(classNames[j]==className){elements.push(child);break;}}}return elements;};}function changeAppType(item){var appType=item.value;if(appType==1){$('#myself_type_desc').hide();$('#demo_type_desc').show();$('#sdkAppIdDiv').hide();$('#accountTypeDiv').hide();$('#accountModeDiv').hide();}else if(appType==0){$('#demo_type_desc').hide();$('#myself_type_desc').show();$('#sdkAppIdDiv').show();$('#accountTypeDiv').show();$('#accountModeDiv').show();}}$("input[name=accountMode]").change(function(){accountMode=$("input[name=accountMode]:checked").val();console.debug(accountMode);});function selectApp(){var appType=$('input[name="app_type_radio"]:checked').val();if(appType==1){loginInfo.sdkAppID=loginInfo.appIDAt3rd=sdkAppID;loginInfo.accountType=accountType;}else if(appType==0){if($("#sdk_app_id").val().length==0){alert('请输入sdkAppId');return;}if(!validNumber($("#sdk_app_id").val())){alert('sdkAppId非法,只能输入数字');return;}if($("#account_type").val().length==0){alert('请输入accountType');return;}if(!validNumber($("#account_type").val())){alert('accountType非法,只能输入数字');return;}loginInfo.sdkAppID=loginInfo.appIDAt3rd=$('#sdk_app_id').val();loginInfo.accountType=$('#account_type').val();}webim.Tool.setCookie('accountType',loginInfo.accountType,3600*24);$('#select_app_dialog').modal('hide');if(accountMode==1){tlsLogin();}else{$('#login_dialog').modal('show');}}function showLoginDialog(){$('#select_app_dialog').modal('hide');$('#login_dialog').modal('show');$("#login_account").focus();}function independentModeLogin(){if($("#login_account").val().length==0){alert('请输入帐号');return;}if($("#login_pwd").val().length==0){alert('请输入UserSig');return;}loginInfo.identifier=$('#login_account').val();loginInfo.userSig=$('#login_pwd').val();$('#login_dialog').modal('hide');webimLogin();}function initDemoApp(){$("body").css("background-color",'#2f2f2f');document.getElementById("webim_demo").style.display="block";document.getElementById("p_my_face").src=loginInfo.headurl;if(loginInfo.identifierNick){document.getElementById("t_my_name").innerHTML=webim.Tool.formatText2Html(loginInfo.identifierNick);}else{document.getElementById("t_my_name").innerHTML=webim.Tool.formatText2Html(loginInfo.identifier);}$("#t_my_menu").menu();$("#send_msg_text").focus();initGetApplyJoinGroupPendency([]);initGetMyGroupSystemMsgs([]);initGetMyFriendSystemMsgs([]);initGetMyProfileSystemMsgs([]);initInfoMap(initInfoMapCallbackOK);}function initInfoMap(cbOk){initInfoMapByMyFriends(initInfoMapByMyGroups(cbOk));}function initInfoMapCallbackOK(){initRecentContactList(initRecentContactListCallbackOK);}function initRecentContactListCallbackOK(){onSelSess(selType,selToID);}function validNumber(str){if(!str){str=str.toString();return str.match(/(^\d+$)/g);}else{return str;}}function onAppliedDownloadUrl(data){console.debug(data);}