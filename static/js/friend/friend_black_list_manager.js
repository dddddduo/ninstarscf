function gblOperateFormatter(t,e,i){return['<a class="remove ml10" href="javascript:void(0)" title="删除">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}function initGetBlackListTable(t){$("#get_black_list_table").bootstrapTable({method:"get",cache:!1,height:500,striped:!0,pagination:!0,pageSize:pageSize,pageNumber:1,pageList:[10,20,50,100],search:!0,showColumns:!0,clickToSelect:!0,columns:[{field:"To_Account",title:"账号",align:"center",valign:"middle",sortable:"true"},{field:"AddBlackTimeStamp",title:"操作时间",align:"center",valign:"middle",sortable:"true"},{field:"operate",title:"操作",align:"center",valign:"middle",formatter:"gblOperateFormatter",events:"gblOperateEvents"}],data:t,formatNoMatches:function(){return"无符合条件的记录"}})}window.gblOperateEvents={"click .remove":function(t,e,i,a){confirm("确定将该联系人从黑名单删除吗？")&&deleteBlackList(i.To_Account)}};var addBlackList=function(t){var e=[];if(t&&(e=[t]),0==e.length)return void alert("需要拉黑的帐号为空");var i={From_Account:loginInfo.identifier,To_Account:e};webim.addBlackList(i,function(e){$("#get_my_friend_table").bootstrapTable("remove",{field:"Info_Account",values:[t]}),deleteSessDiv(webim.SESSION_TYPE.C2C,t),alert("添加黑名单成功")},function(t){alert(t.ErrorInfo)})},deleteBlackList=function(t){var e=[t],i={From_Account:loginInfo.identifier,To_Account:e};webim.deleteBlackList(i,function(t){$("#get_black_list_table").bootstrapTable("remove",{field:"To_Account",values:e}),alert("删除黑名单成功")},function(t){alert(t.ErrorInfo)})},getBlackList=function(t,e){initGetBlackListTable([]);var i={From_Account:loginInfo.identifier,StartIndex:0,MaxLimited:totalCount,LastSequence:0};webim.getBlackList(i,function(t){var e=[];if(t.BlackListItem&&t.BlackListItem.length>0)for(var i in t.BlackListItem){var a=webim.Tool.formatTimeStamp(t.BlackListItem[i].AddBlackTimeStamp);e.push({To_Account:webim.Tool.formatText2Html(t.BlackListItem[i].To_Account),AddBlackTimeStamp:a})}$("#get_black_list_table").bootstrapTable("load",e),$("#get_black_list_dialog").modal("show")},function(t){alert(t.ErrorInfo)})};